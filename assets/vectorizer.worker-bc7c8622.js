function I(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var C={exports:{}};(function(v){(function(){function O(){var g=this;this.versionnumber="1.2.6",this.imageToSVG=function(e,a,r){r=g.checkoptions(r),g.loadImage(e,function(t){a(g.imagedataToSVG(g.getImgdata(t),r))},r)},this.imagedataToSVG=function(e,a){a=g.checkoptions(a);var r=g.imagedataToTracedata(e,a);return g.getsvgstring(r,a)},this.imageToTracedata=function(e,a,r){r=g.checkoptions(r),g.loadImage(e,function(t){a(g.imagedataToTracedata(g.getImgdata(t),r))},r)},this.imagedataToTracedata=function(e,a){a=g.checkoptions(a);var r=g.colorquantization(e,a);if(a.layering===0)for(var t={layers:[],palette:r.palette,width:r.array[0].length-2,height:r.array.length-2},s=0;s<r.palette.length;s++){var l=g.batchtracepaths(g.internodes(g.pathscan(g.layeringstep(r,s),a.pathomit),a),a.ltres,a.qtres);t.layers.push(l)}else{var c=g.layering(r);a.layercontainerid&&g.drawLayers(c,g.specpalette,a.scale,a.layercontainerid);var n=g.batchpathscan(c,a.pathomit),i=g.batchinternodes(n,a),t={layers:g.batchtracelayers(i,a.ltres,a.qtres),palette:r.palette,width:e.width,height:e.height}}return t},this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.checkoptions=function(e){e=e||{},typeof e=="string"&&(e=e.toLowerCase(),g.optionpresets[e]?e=g.optionpresets[e]:e={});for(var a=Object.keys(g.optionpresets.default),r=0;r<a.length;r++)e.hasOwnProperty(a[r])||(e[a[r]]=g.optionpresets.default[a[r]]);return e},this.colorquantization=function(e,a){var r=[],t=0,s,l,c,n=[],i=e.width*e.height,o,d,u,b,h;if(e.data.length<i*4){for(var f=new Uint8ClampedArray(i*4),y=0;y<i;y++)f[y*4]=e.data[y*3],f[y*4+1]=e.data[y*3+1],f[y*4+2]=e.data[y*3+2],f[y*4+3]=255;e.data=f}for(d=0;d<e.height+2;d++)for(r[d]=[],o=0;o<e.width+2;o++)r[d][o]=-1;for(a.pal?h=a.pal:a.colorsampling===0?h=g.generatepalette(a.numberofcolors):a.colorsampling===1?h=g.samplepalette(a.numberofcolors,e):h=g.samplepalette2(a.numberofcolors,e),a.blurradius>0&&(e=g.blur(e,a.blurradius,a.blurdelta)),b=0;b<a.colorquantcycles;b++){if(b>0)for(u=0;u<h.length;u++)n[u].n>0&&(h[u]={r:Math.floor(n[u].r/n[u].n),g:Math.floor(n[u].g/n[u].n),b:Math.floor(n[u].b/n[u].n),a:Math.floor(n[u].a/n[u].n)}),n[u].n/i<a.mincolorratio&&b<a.colorquantcycles-1&&(h[u]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(o=0;o<h.length;o++)n[o]={r:0,g:0,b:0,a:0,n:0};for(d=0;d<e.height;d++)for(o=0;o<e.width;o++){for(t=(d*e.width+o)*4,c=0,l=1024,u=0;u<h.length;u++)s=Math.abs(h[u].r-e.data[t])+Math.abs(h[u].g-e.data[t+1])+Math.abs(h[u].b-e.data[t+2])+Math.abs(h[u].a-e.data[t+3]),s<l&&(l=s,c=u);n[c].r+=e.data[t],n[c].g+=e.data[t+1],n[c].b+=e.data[t+2],n[c].a+=e.data[t+3],n[c].n++,r[d+1][o+1]=c}}return{array:r,palette:h}},this.samplepalette=function(e,a){for(var r,t=[],s=0;s<e;s++)r=Math.floor(Math.random()*a.data.length/4)*4,t.push({r:a.data[r],g:a.data[r+1],b:a.data[r+2],a:a.data[r+3]});return t},this.samplepalette2=function(e,a){for(var r,t=[],s=Math.ceil(Math.sqrt(e)),l=Math.ceil(e/s),c=a.width/(s+1),n=a.height/(l+1),i=0;i<l;i++)for(var o=0;o<s&&t.length!==e;o++)r=Math.floor((i+1)*n*a.width+(o+1)*c)*4,t.push({r:a.data[r],g:a.data[r+1],b:a.data[r+2],a:a.data[r+3]});return t},this.generatepalette=function(e){var a=[],r,t,s;if(e<8)for(var l=Math.floor(255/(e-1)),c=0;c<e;c++)a.push({r:c*l,g:c*l,b:c*l,a:255});else{var n=Math.floor(Math.pow(e,.3333333333333333)),i=Math.floor(255/(n-1)),o=e-n*n*n;for(r=0;r<n;r++)for(t=0;t<n;t++)for(s=0;s<n;s++)a.push({r:r*i,g:t*i,b:s*i,a:255});for(r=0;r<o;r++)a.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return a},this.layering=function(e){var a=[],r=0,t=e.array.length,s=e.array[0].length,l,c,n,i,o,d,u,b,h,f,y;for(y=0;y<e.palette.length;y++)for(a[y]=[],f=0;f<t;f++)for(a[y][f]=[],h=0;h<s;h++)a[y][f][h]=0;for(f=1;f<t-1;f++)for(h=1;h<s-1;h++)r=e.array[f][h],l=e.array[f-1][h-1]===r?1:0,c=e.array[f-1][h]===r?1:0,n=e.array[f-1][h+1]===r?1:0,i=e.array[f][h-1]===r?1:0,o=e.array[f][h+1]===r?1:0,d=e.array[f+1][h-1]===r?1:0,u=e.array[f+1][h]===r?1:0,b=e.array[f+1][h+1]===r?1:0,a[r][f+1][h+1]=1+o*2+b*4+u*8,i||(a[r][f+1][h]=0+2+u*4+d*8),c||(a[r][f][h+1]=0+n*2+o*4+8),l||(a[r][f][h]=0+c*2+4+i*8);return a},this.layeringstep=function(e,a){var r=[],t=e.array.length,s=e.array[0].length,l,c;for(c=0;c<t;c++)for(r[c]=[],l=0;l<s;l++)r[c][l]=0;for(c=1;c<t;c++)for(l=1;l<s;l++)r[c][l]=(e.array[c-1][l-1]===a?1:0)+(e.array[c-1][l]===a?2:0)+(e.array[c][l-1]===a?8:0)+(e.array[c][l]===a?4:0);return r},this.pointinpoly=function(e,a){for(var r=!1,t=0,s=a.length-1;t<a.length;s=t++)r=a[t].y>e.y!=a[s].y>e.y&&e.x<(a[s].x-a[t].x)*(e.y-a[t].y)/(a[s].y-a[t].y)+a[t].x?!r:r;return r},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.pathscan=function(e,a){for(var r=[],t=0,s=0,l=0,c=0,n=e[0].length,i=e.length,o=0,d=!0,u=!1,b,h=0;h<i;h++)for(var f=0;f<n;f++)if(e[h][f]==4||e[h][f]==11)for(l=f,c=h,r[t]={},r[t].points=[],r[t].boundingbox=[l,c,l,c],r[t].holechildren=[],d=!1,s=0,u=e[h][f]==11,o=1;!d;){if(r[t].points[s]={},r[t].points[s].x=l-1,r[t].points[s].y=c-1,r[t].points[s].t=e[c][l],l-1<r[t].boundingbox[0]&&(r[t].boundingbox[0]=l-1),l-1>r[t].boundingbox[2]&&(r[t].boundingbox[2]=l-1),c-1<r[t].boundingbox[1]&&(r[t].boundingbox[1]=c-1),c-1>r[t].boundingbox[3]&&(r[t].boundingbox[3]=c-1),b=g.pathscan_combined_lookup[e[c][l]][o],e[c][l]=b[0],o=b[1],l+=b[2],c+=b[3],l-1===r[t].points[0].x&&c-1===r[t].points[0].y)if(d=!0,r[t].points.length<a)r.pop();else{if(r[t].isholepath=!!u,u){for(var y=0,m=[-1,-1,n+1,i+1],x=0;x<t;x++)!r[x].isholepath&&g.boundingboxincludes(r[x].boundingbox,r[t].boundingbox)&&g.boundingboxincludes(m,r[x].boundingbox)&&g.pointinpoly(r[t].points[0],r[x].points)&&(y=x,m=r[x].boundingbox);r[y].holechildren.push(t)}t++}s++}return r},this.boundingboxincludes=function(e,a){return e[0]<a[0]&&e[1]<a[1]&&e[2]>a[2]&&e[3]>a[3]},this.batchpathscan=function(e,a){var r=[];for(var t in e)e.hasOwnProperty(t)&&(r[t]=g.pathscan(e[t],a));return r},this.internodes=function(e,a){var r=[],t=0,s=0,l=0,c=0,n=0,i,o;for(i=0;i<e.length;i++)for(r[i]={},r[i].points=[],r[i].boundingbox=e[i].boundingbox,r[i].holechildren=e[i].holechildren,r[i].isholepath=e[i].isholepath,t=e[i].points.length,o=0;o<t;o++)s=(o+1)%t,l=(o+2)%t,c=(o-1+t)%t,n=(o-2+t)%t,a.rightangleenhance&&g.testrightangle(e[i],n,c,o,s,l)&&(r[i].points.length>0&&(r[i].points[r[i].points.length-1].linesegment=g.getdirection(r[i].points[r[i].points.length-1].x,r[i].points[r[i].points.length-1].y,e[i].points[o].x,e[i].points[o].y)),r[i].points.push({x:e[i].points[o].x,y:e[i].points[o].y,linesegment:g.getdirection(e[i].points[o].x,e[i].points[o].y,(e[i].points[o].x+e[i].points[s].x)/2,(e[i].points[o].y+e[i].points[s].y)/2)})),r[i].points.push({x:(e[i].points[o].x+e[i].points[s].x)/2,y:(e[i].points[o].y+e[i].points[s].y)/2,linesegment:g.getdirection((e[i].points[o].x+e[i].points[s].x)/2,(e[i].points[o].y+e[i].points[s].y)/2,(e[i].points[s].x+e[i].points[l].x)/2,(e[i].points[s].y+e[i].points[l].y)/2)});return r},this.testrightangle=function(e,a,r,t,s,l){return e.points[t].x===e.points[a].x&&e.points[t].x===e.points[r].x&&e.points[t].y===e.points[s].y&&e.points[t].y===e.points[l].y||e.points[t].y===e.points[a].y&&e.points[t].y===e.points[r].y&&e.points[t].x===e.points[s].x&&e.points[t].x===e.points[l].x},this.getdirection=function(e,a,r,t){var s=8;return e<r?a<t?s=1:a>t?s=7:s=0:e>r?a<t?s=3:a>t?s=5:s=4:a<t?s=2:a>t?s=6:s=8,s},this.batchinternodes=function(e,a){var r=[];for(var t in e)e.hasOwnProperty(t)&&(r[t]=g.internodes(e[t],a));return r},this.tracepath=function(e,a,r){var t=0,s,l,c,n={};for(n.segments=[],n.boundingbox=e.boundingbox,n.holechildren=e.holechildren,n.isholepath=e.isholepath;t<e.points.length;){for(s=e.points[t].linesegment,l=-1,c=t+1;(e.points[c].linesegment===s||e.points[c].linesegment===l||l===-1)&&c<e.points.length-1;)e.points[c].linesegment!==s&&l===-1&&(l=e.points[c].linesegment),c++;c===e.points.length-1&&(c=0),n.segments=n.segments.concat(g.fitseq(e,a,r,t,c)),c>0?t=c:t=e.points.length}return n},this.fitseq=function(e,a,r,t,s){if(s>e.points.length||s<0)return[];var l=t,c=0,n=!0,i,o,d,u=s-t;u<0&&(u+=e.points.length);for(var b=(e.points[s].x-e.points[t].x)/u,h=(e.points[s].y-e.points[t].y)/u,f=(t+1)%e.points.length,y;f!=s;)y=f-t,y<0&&(y+=e.points.length),i=e.points[t].x+b*y,o=e.points[t].y+h*y,d=(e.points[f].x-i)*(e.points[f].x-i)+(e.points[f].y-o)*(e.points[f].y-o),d>a&&(n=!1),d>c&&(l=f,c=d),f=(f+1)%e.points.length;if(n)return[{type:"L",x1:e.points[t].x,y1:e.points[t].y,x2:e.points[s].x,y2:e.points[s].y}];var m=l;n=!0,c=0;var x=(m-t)/u,w=(1-x)*(1-x),M=2*(1-x)*x,k=x*x,P=(w*e.points[t].x+k*e.points[s].x-e.points[m].x)/-M,p=(w*e.points[t].y+k*e.points[s].y-e.points[m].y)/-M;for(f=t+1;f!=s;)x=(f-t)/u,w=(1-x)*(1-x),M=2*(1-x)*x,k=x*x,i=w*e.points[t].x+M*P+k*e.points[s].x,o=w*e.points[t].y+M*p+k*e.points[s].y,d=(e.points[f].x-i)*(e.points[f].x-i)+(e.points[f].y-o)*(e.points[f].y-o),d>r&&(n=!1),d>c&&(l=f,c=d),f=(f+1)%e.points.length;if(n)return[{type:"Q",x1:e.points[t].x,y1:e.points[t].y,x2:P,y2:p,x3:e.points[s].x,y3:e.points[s].y}];var T=m;return g.fitseq(e,a,r,t,T).concat(g.fitseq(e,a,r,T,s))},this.batchtracepaths=function(e,a,r){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(g.tracepath(e[s],a,r));return t},this.batchtracelayers=function(e,a,r){var t=[];for(var s in e)e.hasOwnProperty(s)&&(t[s]=g.batchtracepaths(e[s],a,r));return t},this.roundtodec=function(e,a){return+e.toFixed(a)},this.svgpathstring=function(e,a,r,t){var s=e.layers[a],l=s[r],c="",n;if(t.linefilter&&l.segments.length<3)return c;if(c="<path "+(t.desc?'desc="l '+a+" p "+r+'" ':"")+g.tosvgcolorstr(e.palette[a],t)+'d="',t.roundcoords===-1){for(c+="M "+l.segments[0].x1*t.scale+" "+l.segments[0].y1*t.scale+" ",n=0;n<l.segments.length;n++)c+=l.segments[n].type+" "+l.segments[n].x2*t.scale+" "+l.segments[n].y2*t.scale+" ",l.segments[n].hasOwnProperty("x3")&&(c+=l.segments[n].x3*t.scale+" "+l.segments[n].y3*t.scale+" ");c+="Z "}else{for(c+="M "+g.roundtodec(l.segments[0].x1*t.scale,t.roundcoords)+" "+g.roundtodec(l.segments[0].y1*t.scale,t.roundcoords)+" ",n=0;n<l.segments.length;n++)c+=l.segments[n].type+" "+g.roundtodec(l.segments[n].x2*t.scale,t.roundcoords)+" "+g.roundtodec(l.segments[n].y2*t.scale,t.roundcoords)+" ",l.segments[n].hasOwnProperty("x3")&&(c+=g.roundtodec(l.segments[n].x3*t.scale,t.roundcoords)+" "+g.roundtodec(l.segments[n].y3*t.scale,t.roundcoords)+" ");c+="Z "}for(var i=0;i<l.holechildren.length;i++){var o=s[l.holechildren[i]];if(t.roundcoords===-1)for(o.segments[o.segments.length-1].hasOwnProperty("x3")?c+="M "+o.segments[o.segments.length-1].x3*t.scale+" "+o.segments[o.segments.length-1].y3*t.scale+" ":c+="M "+o.segments[o.segments.length-1].x2*t.scale+" "+o.segments[o.segments.length-1].y2*t.scale+" ",n=o.segments.length-1;n>=0;n--)c+=o.segments[n].type+" ",o.segments[n].hasOwnProperty("x3")&&(c+=o.segments[n].x2*t.scale+" "+o.segments[n].y2*t.scale+" "),c+=o.segments[n].x1*t.scale+" "+o.segments[n].y1*t.scale+" ";else for(o.segments[o.segments.length-1].hasOwnProperty("x3")?c+="M "+g.roundtodec(o.segments[o.segments.length-1].x3*t.scale)+" "+g.roundtodec(o.segments[o.segments.length-1].y3*t.scale)+" ":c+="M "+g.roundtodec(o.segments[o.segments.length-1].x2*t.scale)+" "+g.roundtodec(o.segments[o.segments.length-1].y2*t.scale)+" ",n=o.segments.length-1;n>=0;n--)c+=o.segments[n].type+" ",o.segments[n].hasOwnProperty("x3")&&(c+=g.roundtodec(o.segments[n].x2*t.scale)+" "+g.roundtodec(o.segments[n].y2*t.scale)+" "),c+=g.roundtodec(o.segments[n].x1*t.scale)+" "+g.roundtodec(o.segments[n].y1*t.scale)+" ";c+="Z "}if(c+='" />',t.lcpr||t.qcpr){for(n=0;n<l.segments.length;n++)l.segments[n].hasOwnProperty("x3")&&t.qcpr&&(c+='<circle cx="'+l.segments[n].x2*t.scale+'" cy="'+l.segments[n].y2*t.scale+'" r="'+t.qcpr+'" fill="cyan" stroke-width="'+t.qcpr*.2+'" stroke="black" />',c+='<circle cx="'+l.segments[n].x3*t.scale+'" cy="'+l.segments[n].y3*t.scale+'" r="'+t.qcpr+'" fill="white" stroke-width="'+t.qcpr*.2+'" stroke="black" />',c+='<line x1="'+l.segments[n].x1*t.scale+'" y1="'+l.segments[n].y1*t.scale+'" x2="'+l.segments[n].x2*t.scale+'" y2="'+l.segments[n].y2*t.scale+'" stroke-width="'+t.qcpr*.2+'" stroke="cyan" />',c+='<line x1="'+l.segments[n].x2*t.scale+'" y1="'+l.segments[n].y2*t.scale+'" x2="'+l.segments[n].x3*t.scale+'" y2="'+l.segments[n].y3*t.scale+'" stroke-width="'+t.qcpr*.2+'" stroke="cyan" />'),!l.segments[n].hasOwnProperty("x3")&&t.lcpr&&(c+='<circle cx="'+l.segments[n].x2*t.scale+'" cy="'+l.segments[n].y2*t.scale+'" r="'+t.lcpr+'" fill="white" stroke-width="'+t.lcpr*.2+'" stroke="black" />');for(var i=0;i<l.holechildren.length;i++){var o=s[l.holechildren[i]];for(n=0;n<o.segments.length;n++)o.segments[n].hasOwnProperty("x3")&&t.qcpr&&(c+='<circle cx="'+o.segments[n].x2*t.scale+'" cy="'+o.segments[n].y2*t.scale+'" r="'+t.qcpr+'" fill="cyan" stroke-width="'+t.qcpr*.2+'" stroke="black" />',c+='<circle cx="'+o.segments[n].x3*t.scale+'" cy="'+o.segments[n].y3*t.scale+'" r="'+t.qcpr+'" fill="white" stroke-width="'+t.qcpr*.2+'" stroke="black" />',c+='<line x1="'+o.segments[n].x1*t.scale+'" y1="'+o.segments[n].y1*t.scale+'" x2="'+o.segments[n].x2*t.scale+'" y2="'+o.segments[n].y2*t.scale+'" stroke-width="'+t.qcpr*.2+'" stroke="cyan" />',c+='<line x1="'+o.segments[n].x2*t.scale+'" y1="'+o.segments[n].y2*t.scale+'" x2="'+o.segments[n].x3*t.scale+'" y2="'+o.segments[n].y3*t.scale+'" stroke-width="'+t.qcpr*.2+'" stroke="cyan" />'),!o.segments[n].hasOwnProperty("x3")&&t.lcpr&&(c+='<circle cx="'+o.segments[n].x2*t.scale+'" cy="'+o.segments[n].y2*t.scale+'" r="'+t.lcpr+'" fill="white" stroke-width="'+t.lcpr*.2+'" stroke="black" />')}}return c},this.getsvgstring=function(e,a){a=g.checkoptions(a);for(var r=e.width*a.scale,t=e.height*a.scale,s="<svg "+(a.viewbox?'viewBox="0 0 '+r+" "+t+'" ':'width="'+r+'" height="'+t+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+g.versionnumber+'" >',l=0;l<e.layers.length;l++)for(var c=0;c<e.layers[l].length;c++)e.layers[l][c].isholepath||(s+=g.svgpathstring(e,l,c,a));return s+="</svg>",s},this.compareNumbers=function(e,a){return e-a},this.torgbastr=function(e){return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},this.tosvgcolorstr=function(e,a){return'fill="rgb('+e.r+","+e.g+","+e.b+')" stroke="rgb('+e.r+","+e.g+","+e.b+')" stroke-width="'+a.strokewidth+'" opacity="'+e.a/255+'" '},this.appendSVGString=function(e,a){var r;a?(r=document.getElementById(a),r||(r=document.createElement("div"),r.id=a,document.body.appendChild(r))):(r=document.createElement("div"),document.body.appendChild(r)),r.innerHTML+=e},this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.blur=function(e,a,r){var t,s,l,c,n,i,o,d,u,b,h={width:e.width,height:e.height,data:[]};if(a=Math.floor(a),a<1)return e;a>5&&(a=5),r=Math.abs(r),r>1024&&(r=1024);var f=g.gks[a-1];for(s=0;s<e.height;s++)for(t=0;t<e.width;t++){for(i=0,o=0,d=0,u=0,b=0,l=-a;l<a+1;l++)t+l>0&&t+l<e.width&&(n=(s*e.width+t+l)*4,i+=e.data[n]*f[l+a],o+=e.data[n+1]*f[l+a],d+=e.data[n+2]*f[l+a],u+=e.data[n+3]*f[l+a],b+=f[l+a]);n=(s*e.width+t)*4,h.data[n]=Math.floor(i/b),h.data[n+1]=Math.floor(o/b),h.data[n+2]=Math.floor(d/b),h.data[n+3]=Math.floor(u/b)}var y=new Uint8ClampedArray(h.data);for(s=0;s<e.height;s++)for(t=0;t<e.width;t++){for(i=0,o=0,d=0,u=0,b=0,l=-a;l<a+1;l++)s+l>0&&s+l<e.height&&(n=((s+l)*e.width+t)*4,i+=y[n]*f[l+a],o+=y[n+1]*f[l+a],d+=y[n+2]*f[l+a],u+=y[n+3]*f[l+a],b+=f[l+a]);n=(s*e.width+t)*4,h.data[n]=Math.floor(i/b),h.data[n+1]=Math.floor(o/b),h.data[n+2]=Math.floor(d/b),h.data[n+3]=Math.floor(u/b)}for(s=0;s<e.height;s++)for(t=0;t<e.width;t++)n=(s*e.width+t)*4,c=Math.abs(h.data[n]-e.data[n])+Math.abs(h.data[n+1]-e.data[n+1])+Math.abs(h.data[n+2]-e.data[n+2])+Math.abs(h.data[n+3]-e.data[n+3]),c>r&&(h.data[n]=e.data[n],h.data[n+1]=e.data[n+1],h.data[n+2]=e.data[n+2],h.data[n+3]=e.data[n+3]);return h},this.loadImage=function(e,a,r){var t=new Image;r&&r.corsenabled&&(t.crossOrigin="Anonymous"),t.onload=function(){var s=document.createElement("canvas");s.width=t.width,s.height=t.height;var l=s.getContext("2d");l.drawImage(t,0,0),a(s)},t.src=e},this.getImgdata=function(e){var a=e.getContext("2d");return a.getImageData(0,0,e.width,e.height)},this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}],this.drawLayers=function(e,a,r,t){r=r||1;var s,l,c,n,i,o;t?(o=document.getElementById(t),o||(o=document.createElement("div"),o.id=t,document.body.appendChild(o))):(o=document.createElement("div"),document.body.appendChild(o));for(i in e)if(e.hasOwnProperty(i)){s=e[i][0].length,l=e[i].length;var d=document.createElement("canvas");d.width=s*r,d.height=l*r;var u=d.getContext("2d");for(n=0;n<l;n++)for(c=0;c<s;c++)u.fillStyle=g.torgbastr(a[e[i][n][c]%a.length]),u.fillRect(c*r,n*r,r,r);o.appendChild(d)}}}v.exports=new O})()})(C);var _=C.exports,E=I(_);self.onmessage=v=>{const{imageData:O,options:g}=v.data;try{const e=E.imagedataToSVG(O,g);self.postMessage({type:"success",svg:e})}catch(e){self.postMessage({type:"error",error:String(e)})}};
//# sourceMappingURL=vectorizer.worker-bc7c8622.js.map
